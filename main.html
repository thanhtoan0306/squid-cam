<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Main Window</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="script-src 'self' 'unsafe-inline';"
    />
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        display: flex;
        flex-direction: column;
        height: 100vh;
        background-color: #f0f0f0; /* M√†u n·ªÅn nh·∫°t */
      }
      #video-preview {
        flex-grow: 1; /* Chi·∫øm ph·∫ßn l·ªõn kh√¥ng gian */
        background-color: #333; /* M√†u n·ªÅn t·ªëi cho khu v·ª±c video */
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 1.5em;
        /* Trong ·ª©ng d·ª•ng th·ª±c t·∫ø, b·∫°n s·∫Ω ƒë·∫∑t th·∫ª <video> ·ªü ƒë√¢y */
        border-bottom: 1px solid #ccc;
      }
      #main-controls {
        padding: 10px;
        background-color: #e0e0e0; /* N·ªÅn s√°ng h∆°n cho control */
        display: flex;
        justify-content: space-between; /* Ph√¢n b·ªë c√°c n√∫t */
        align-items: center;
      }
      #left-controls button,
      #right-controls button {
        padding: 8px 15px;
        margin: 0 5px;
        cursor: pointer;
      }
      #start-stream-button {
        background-color: #ffcc00; /* M√†u v√†ng gi·ªëng ·∫£nh */
        border: none;
        font-weight: bold;
      }
      #applied-effect {
        margin-top: 10px;
        font-style: italic;
        color: #555;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id="video-preview">
      Video Preview Area
      <div id="applied-effect">No effect applied</div>
    </div>

    <div id="main-controls">
      <div id="left-controls">
        <button>Camera</button>
        <button>Capture</button>
        <button>Multimedia</button>
        <button>RTMP</button>
      </div>
      <div id="right-controls">
        <button id="start-stream-button">Start Streaming</button>
      </div>
    </div>
    <!-- N√∫t m·ªü c·ª≠a s·ªï secondary -->
    <button id="open-secondary-btn">M·ªü c·ª≠a s·ªï hi·ªáu ·ª©ng ph·ª•</button>

    <!-- Effects section -->
    <div class="control-section">
      <h4>Effects</h4>
      <div class="button-grid effect-buttons">
        <button data-effect="Blur">Blur</button>
        <button data-effect="Pixelate">Pixel</button>
        <button data-effect="Sepia">Sepia</button>
        <button data-effect="Invert">Invert</button>
      </div>
    </div>

    <!-- Sound Animation section -->
    <div class="control-section">
      <h4>Sound Animation üîä</h4>
      <div class="button-grid sound-buttons">
        <button data-sound="Applause">üëè</button>
        <button data-sound="ColdWind">üí®</button>
        <button data-sound="Crow">üê¶</button>
        <button data-sound="Laugh">üòÇ</button>
      </div>
    </div>

    <script>
      const { ipcRenderer } = require("electron");

      const appliedEffectDiv = document.getElementById("applied-effect");

      // L·∫Øng nghe th√¥ng ƒëi·ªáp 'update-effect' t·ª´ main process
      ipcRenderer.on("update-effect", (event, effectName) => {
        console.log(`Main window received effect: ${effectName}`);
        // Hi·ªÉn th·ªã t√™n hi·ªáu ·ª©ng ƒëang ƒë∆∞·ª£c √°p d·ª•ng
        appliedEffectDiv.textContent = `Applied Effect: ${effectName}`;
        // G·ªçi h√†m th·ª±c t·∫ø ƒë·ªÉ √°p d·ª•ng hi·ªáu ·ª©ng l√™n video ·ªü ƒë√¢y
        // applyEffectToVideo(effectName);
      });

      // V√≠ d·ª• h√†m gi·∫£ ƒë·ªãnh ƒë·ªÉ √°p d·ª•ng hi·ªáu ·ª©ng
      // function applyEffectToVideo(effectName) {
      //     console.log(`Function to apply ${effectName} would run here.`);
      // }
      // L·∫•y t·∫•t c·∫£ c√°c n√∫t hi·ªáu ·ª©ng v√† √¢m thanh
      document.querySelectorAll(".effect-buttons button").forEach((btn) => {
        btn.addEventListener("click", () => {
          const effect = btn.getAttribute("data-effect");
          ipcRenderer.send("apply-effect", effect);
        });
      });
      document.querySelectorAll(".sound-buttons button").forEach((btn) => {
        btn.addEventListener("click", () => {
          const sound = btn.getAttribute("data-sound");
          ipcRenderer.send("play-sound", sound);
        });
      });

      // N√∫t m·ªü c·ª≠a s·ªï secondary
      document
        .getElementById("open-secondary-btn")
        .addEventListener("click", () => {
          ipcRenderer.send("open-secondary-window");
        });
    </script>
  </body>
</html>
